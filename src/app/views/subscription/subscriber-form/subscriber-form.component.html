<section>
  <h1><i class="material-icons">notification_important</i> {{(newItem) ? 'Edit' : 'Create'}} Subscription</h1>

  <form name="frSubscriber" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
    <div class="form-group">
      <label for="email">E-mail</label>
      <input type="email"
             id="email" name="email"
             class="form-control"
             [(ngModel)]="form.email"
             required #mailField="ngModel" />
      <div class="alert alert-danger" role="alert" *ngIf="f.submitted && mailField.invalid" >
        E-mail is required!
      </div>
    </div>

    <div class="form-group">
      <label for="apiNameSel">API: </label>
      <mat-form-field class="form-line w50" >
        <mat-label>Select API</mat-label>
        <mat-select id="apiNameSel" required [(value)]="form.apiName"
         #apiNameSel>
          <mat-option *ngFor="let ap of appList" [value]="ap.name">
            {{ap.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div class="alert alert-danger"
           role="alert"
           *ngIf="f.submitted && apiNameSel.invalid">
        <div *ngIf="form.apiName.errors.required">API is required</div>
      </div>
    </div>

    <div>
      <h3>Path filtering:</h3>
      <div class="action-top action-buttons mat-toolbar">
        <button type="button" (click)="addPath()" title="Add path"
                mat-button color="primary">
          <i class="material-icons">add</i>
          Add Path
        </button>
      </div>
      <table class="data-table" >
        <tr>
          <th>Base Path</th>
          <th><i class="material-icons">keyboard_hide</i></th>
        </tr>
        <tr *ngFor="let item of pathList; let i = index">
          <td>
            <input name="in_name_{{i}}" type="text" [(ngModel)]="item.value"
             placeholder="Path ( ex: /v1/cities/ )">
          </td>
          <td><a (click)="removePath(i)" title="Remove item"><i class="material-icons">delete</i></a></td>
        </tr>
      </table>
    </div>

    <div class="form-group action-bar">
      <div class="action-buttons">
        <button type="button" class="secondary" mat-button (click)="cancel()">Cancel</button>
        <button type="button" mat-raised-button color="primary" (click)="save()">Submit</button>
      </div>
    </div>

  </form>
</section>